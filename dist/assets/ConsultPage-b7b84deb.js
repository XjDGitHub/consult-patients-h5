import{_ as B}from"./CpNavBar-7cf3a7ed.js";import{O as y,C as z}from"./index-750a2ba0.js";import{i as D}from"./consult-8ddc6603.js";import{d as O,i as T,a as l,b as m,e as i,t as C,n as F,f as e,c as s,w as n,h as d,y as g,g as k,p as S,k as V,_ as L,r as I,F as N,x as E}from"./index-1f5bf9e6.js";import{_ as R}from"./avatar-doctor-206a2b5c.js";import"./request-2770c0b0.js";import{_ as U}from"./ConsultMore.vue_vue_type_script_setup_true_lang-a8bd8fff.js";import{b as W,c as j,a as q}from"./index-88ea42a3.js";import{B as A}from"./index-f227a669.js";import{L as G,T as H,a as J}from"./index-39a2f305.js";import"./use-placeholder-d6a25d3e.js";import"./index-30acc300.js";import"./index-e4f90eff.js";import"./interceptor-42f26492.js";import"./order-d77b653c.js";import"./use-route-e787040d.js";import"./use-id-657f33f2.js";import"./use-refs-a5877d45.js";const $=t=>(S("data-v-165555b4"),t=t(),V(),t),K={class:"consult-item"},M={class:"head van-hairline--bottom"},Q=$(()=>i("img",{class:"img",src:R},null,-1)),X={class:"body-row"},Y=$(()=>i("div",{class:"body-label"},"病情描述",-1)),Z={class:"body-value"},tt={class:"body-row"},et=$(()=>i("div",{class:"body-label"},"价格",-1)),st={class:"body-value"},ot={class:"body-row"},at=$(()=>i("div",{class:"body-label"},"创建时间",-1)),nt={class:"body-value tip"},it={key:0,class:"foot"},lt={key:1,class:"foot"},dt={key:2,class:"foot"},rt={key:3,class:"foot"},ut={class:"more"},ct={key:4,class:"foot"},mt=O({__name:"ConsultItem",props:{item:null},emits:["on-delete"],setup(t,{emit:x}){const u=t,{showPrescription:_}=q(),{loding:c,cancelConsultOrder:r}=W(),{deleteLoading:b,deleteConsultOrder:h}=j(()=>{x("on-delete",u.item.id)}),p=T();return(v,o)=>{var P;const a=A;return l(),m("div",K,[i("div",M,[Q,i("p",null,C(((P=t.item.docInfo)==null?void 0:P.name)||"暂未分配医生"),1),i("span",{class:F({orange:t.item.status===e(y).ConsultPay,green:t.item.status===e(y).ConsultChat})},C(t.item.statusValue),3)]),i("div",{class:"body",onClick:o[0]||(o[0]=f=>e(p).push(`/user/consult/${t.item.id}`))},[i("div",X,[Y,i("div",Z,C(t.item.illnessDesc),1)]),i("div",tt,[et,i("div",st,"¥ "+C(t.item.payment.toFixed(2)),1)]),i("div",ot,[at,i("div",nt,C(t.item.createTime),1)])]),t.item.status===e(y).ConsultPay?(l(),m("div",it,[s(a,{class:"gray",plain:"",size:"small",round:"",loading:e(c),onClick:o[1]||(o[1]=f=>e(r)(u.item))},{default:n(()=>[d("取消问诊")]),_:1},8,["loading"]),s(a,{type:"primary",plain:"",size:"small",round:"",to:`/user/consult/${t.item.id}`},{default:n(()=>[d(" 去支付 ")]),_:1},8,["to"])])):g("",!0),t.item.status===e(y).ConsultWait?(l(),m("div",lt,[s(a,{class:"gray",plain:"",size:"small",round:"",loading:e(c),onClick:o[2]||(o[2]=f=>e(r)(u.item))},{default:n(()=>[d("取消问诊")]),_:1},8,["loading"]),s(a,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 继续沟通 ")]),_:1},8,["to"])])):g("",!0),t.item.status===e(y).ConsultChat?(l(),m("div",dt,[t.item.prescriptionId?(l(),k(a,{key:0,onClick:o[3]||(o[3]=f=>e(_)(u.item.prescriptionId)),class:"gray",plain:"",size:"small",round:""},{default:n(()=>[d(" 查看处方 ")]),_:1})):g("",!0),s(a,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 继续沟通 ")]),_:1},8,["to"])])):g("",!0),t.item.status===e(y).ConsultComplete?(l(),m("div",rt,[i("div",ut,[s(U,{disabled:!t.item.prescriptionId,onOnDelete:o[4]||(o[4]=f=>e(h)(t.item)),onOnPreview:o[5]||(o[5]=f=>e(_)(t.item.prescriptionId))},null,8,["disabled"])]),s(a,{class:"gray",plain:"",size:"small",round:"",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 问诊记录 ")]),_:1},8,["to"]),t.item.evaluateId?(l(),k(a,{key:1,class:"gray",plain:"",size:"small",round:"",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 查看评价 ")]),_:1},8,["to"])):(l(),k(a,{key:0,to:`/room?orderId=${t.item.id}`,type:"primary",plain:"",size:"small",round:""},{default:n(()=>[d(" 去评价 ")]),_:1},8,["to"]))])):g("",!0),t.item.status===e(y).ConsultCancel?(l(),m("div",ct,[s(a,{class:"gray",plain:"",size:"small",round:"",loading:e(b),onClick:o[6]||(o[6]=f=>e(h)(t.item))},{default:n(()=>[d("删除订单")]),_:1},8,["loading"]),s(a,{type:"primary",plain:"",size:"small",round:"",to:"/"},{default:n(()=>[d("咨询其他医生")]),_:1})])):g("",!0)])}}});const _t=L(mt,[["__scopeId","data-v-165555b4"]]),pt={class:"consult-list"},vt=O({__name:"ConsultList",props:{type:null},setup(t){const u=I({type:t.type,current:1,pageSize:5}),_=I(!1),c=I(!1),r=I([]),b=async()=>{var v;const p=await D(u.value);_.value=!1,console.log(p),(v=r.value)==null||v.push(...p.data.rows),u.value.current<p.data.pageTotal?u.value.current++:c.value=!0},h=p=>{r.value=r.value.filter(v=>v.id!==p),r.value.length||b()};return T(),(p,v)=>{const o=G;return l(),m("div",pt,[s(o,{loading:_.value,"onUpdate:loading":v[0]||(v[0]=a=>_.value=a),finished:c.value,"finished-text":"没有更多了",onLoad:b},{default:n(()=>[(l(!0),m(N,null,E(r.value,a=>(l(),k(_t,{onOnDelete:h,key:a.id,item:a},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])}}});const w=L(vt,[["__scopeId","data-v-d0f612bb"]]),yt={class:"consult-page"},ft=O({__name:"ConsultPage",setup(t){return(x,u)=>{const _=B,c=H,r=J;return l(),m("div",yt,[s(_,{title:"问诊记录"}),s(r,{sticky:""},{default:n(()=>[s(c,{title:"极速问诊"},{default:n(()=>[s(w,{type:e(z).Fast},null,8,["type"])]),_:1}),s(c,{title:"找医生"},{default:n(()=>[s(w,{type:e(z).Fast},null,8,["type"])]),_:1}),s(c,{title:"开药问诊"},{default:n(()=>[s(w,{type:e(z).Fast},null,8,["type"])]),_:1})]),_:1})])}}});const Vt=L(ft,[["__scopeId","data-v-a3273aea"]]);export{Vt as default};
