import{_ as D}from"./CpIcon-ef85b36d.js";import{_ as M}from"./CpNavBar-7cf3a7ed.js";import{F as E,m as A,p as G,c as H}from"./rules-5b422eb0.js";import{l as J,a as K,s as L}from"./user-c8874fe5.js";import{d as I,c as t,r as l,u as O,o as Q,a as g,b as W,e as o,t as w,w as d,f as b,g as y,n as X,h as k,i as Y,j as Z,p as ee,k as oe,_ as ae}from"./index-1f5bf9e6.js";import{s as te,a as V}from"./request-2770c0b0.js";import{c as se,t as ne,m as le,w as re,I as ie}from"./index-30acc300.js";import{F as ue}from"./index-ed65eb93.js";import{C as ce}from"./index-09f3a16d.js";import{B as de}from"./index-f227a669.js";import"./use-placeholder-d6a25d3e.js";import"./interceptor-42f26492.js";import"./index-5432fdfe.js";import"./use-route-e787040d.js";import"./use-id-657f33f2.js";const[pe,me]=se("divider"),_e={dashed:Boolean,hairline:ne,contentPosition:le("center")};var ve=I({name:pe,props:_e,setup(s,{slots:r}){return()=>{var n;return t("div",{role:"separator",class:me({dashed:s.dashed,hairline:s.hairline,[`content-${s.contentPosition}`]:!!r.default})},[(n=r.default)==null?void 0:n.call(r)])}}});const fe=re(ve),he="/assets/qq-7e9221ab.svg",p=s=>(ee("data-v-2eae655a"),s=s(),oe(),s),ge={class:"login-page"},we={class:"login-head"},be={class:"cp-cell"},ye=p(()=>o("span",null,"我已同意",-1)),ke=p(()=>o("a",{href:"javascript:;"},"用户协议",-1)),Ve=p(()=>o("span",null,"及",-1)),Ie=p(()=>o("a",{href:"javascript:;"},"隐私条款",-1)),xe={class:"cp-cell"},Ce=p(()=>o("div",{class:"cp-cell"},[o("a",{href:"javascript:;"},"忘记密码？")],-1)),Be={class:"login-other"},Ue=p(()=>o("img",{src:he,alt:""},null,-1)),$e=[Ue],qe=I({__name:"index",setup(s){const r=l(!1),n=l(""),v=l(""),m=l(!1),x=O(),C=Y(),B=Z(),u=l(!0),U=async()=>{if(!r.value)return te("请勾选用户条例");const c=u.value?await J(n.value,v.value):await K(n.value,f.value);console.log(c),x.setUser(c.data),C.push(B.query.returnUrl||"/user"),console.log(1),V("登录成功")},f=l(""),i=l(0),$=l(void 0);let _;const q=async()=>{var e;if(i.value>0)return;await((e=$.value)==null?void 0:e.validate("mobile"));const c=await L(n.value,"login");console.log(c),V("发送成功"),i.value=60,clearInterval(_),_=window.setInterval(()=>{i.value--,i.value<=0&&window.clearInterval(_)},1e3)};Q(()=>{clearInterval(_)});const P=`https://graph.qq.com/oauth2.0/authorize?client_id=102015968&response_type=token&scope=all&redirect_uri=${encodeURIComponent("https://cp.itheima.net/login/callback")}`;return(c,e)=>{const R=M,S=ie,h=ue,j=D,F=ce,N=de,T=E,z=fe;return g(),W("div",ge,[t(R,{rightText:"注册",onClickRight:e[0]||(e[0]=a=>c.$router.push("/register"))}),o("div",we,[o("h3",null,w(u.value?"密码登录":"验证码登录"),1),o("a",{href:"javascript:;",onClick:e[1]||(e[1]=a=>u.value=!u.value)},[o("span",null,w(u.value?"短信验证码登录":"密码登录"),1),t(S,{name:"arrow"})])]),t(T,{autocomplete:"off",onSubmit:U},{default:d(()=>[t(h,{name:"mobile",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),rules:b(A),type:"tel",placeholder:"请输入手机号"},null,8,["modelValue","rules"]),u.value?(g(),y(h,{key:0,modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),rules:b(G),type:m.value?"text":"password",placeholder:"请输入密码"},{button:d(()=>[t(j,{onClick:e[3]||(e[3]=a=>m.value=!m.value),name:`login-eye-${m.value?"on":"off"}`},null,8,["name"])]),_:1},8,["modelValue","rules","type"])):(g(),y(h,{key:1,modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),rules:b(H),placeholder:"请输入验证码"},{button:d(()=>[o("span",{class:X(["btn-send",{active:i.value>0}]),onClick:q},w(i.value>0?`${i.value}s后再次发送`:"发送验证码"),3)]),_:1},8,["modelValue","rules"])),o("div",be,[t(F,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=a=>r.value=a)},{default:d(()=>[ye,ke,Ve,Ie]),_:1},8,["modelValue"])]),o("div",xe,[t(N,{block:"","native-type":"submit",round:"",type:"primary"},{default:d(()=>[k("登 录")]),_:1})]),Ce]),_:1}),o("div",Be,[t(z,null,{default:d(()=>[k("第三方登录")]),_:1}),o("div",{class:"icon"},[o("a",{href:P},$e)])])])}}});const Ke=ae(qe,[["__scopeId","data-v-2eae655a"]]);export{Ke as default};
