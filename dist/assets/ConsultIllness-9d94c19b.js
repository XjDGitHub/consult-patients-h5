import{_ as k}from"./CpIcon-ef85b36d.js";import{_ as w}from"./CpNavBar-7cf3a7ed.js";import{_ as B}from"./avatar-doctor-206a2b5c.js";import{C as _}from"./CpRadioBtn-a6241701.js";import{I as p}from"./index-750a2ba0.js";import{u as U}from"./consult-8ddc6603.js";import{d as S,r as v,m as M,z as N,v as R,a as f,b as g,c as n,e as l,y as z,w as A,h as O,n as E,f as H,i as L,p as P,k as W,_ as Y}from"./index-1f5bf9e6.js";import{U as j}from"./index-5c35222c.js";import{s as q}from"./function-call-6cb5de99.js";import{a as m}from"./request-2770c0b0.js";import{F as G}from"./index-ed65eb93.js";import{B as J}from"./index-f227a669.js";import"./use-placeholder-d6a25d3e.js";import"./index-30acc300.js";import"./index-e4f90eff.js";import"./interceptor-42f26492.js";import"./index-d4771de6.js";import"./use-route-e787040d.js";import"./index-5432fdfe.js";import"./use-id-657f33f2.js";const i=u=>(P("data-v-7a2a2475"),u=u(),W(),u),K={class:"consult-illness-page"},Q={class:"illness-tip van-hairline--bottom"},X=i(()=>l("img",{class:"img",src:B},null,-1)),Z={class:"info"},$=i(()=>l("p",{class:"tit"},"在线医生",-1)),ss=i(()=>l("p",{class:"tip"},"请描述你的疾病或症状、是否用药、就诊经历，需要我听过什么样的帮助",-1)),es={class:"safe"},os=i(()=>l("span",null,"内容仅医生可见",-1)),ls={class:"illness-form"},ts={class:"item"},as=i(()=>l("p",null,"本次患病多久了？",-1)),ns={class:"item"},is=i(()=>l("p",null,"此次病情是否去医院就诊过？",-1)),us={class:"illness-img"},rs={key:0,class:"tip"},cs=S({__name:"ConsultIllness",setup(u){const h=[{label:"一周内",value:p.Week},{label:"一月内",value:p.Month},{label:"半年内",value:p.HalfYear},{label:"大于半年",value:p.More}],V=[{label:"就诊过",value:0},{label:"没就诊过",value:1}],s=v({illnessDesc:"",illnessTime:void 0,consultFlag:void 0,pictures:[]}),C=async e=>{var o;if(console.log(e),!Array.isArray(e)&&e.file){e.status="uploading",e.message="上传中";try{const t=await U(e.file);e.status="done",e.message=void 0,e.url=t.data.url,(o=s.value.pictures)==null||o.push(t.data)}catch{e.status="failed",e.message="上传失败"}}},b=e=>{var o;s.value.pictures=(o=s.value.pictures)==null?void 0:o.filter(t=>t.url!==e.url),console.log(e)},r=v([]),I=M(()=>!s.value.illnessDesc||s.value.illnessTime===void 0||s.value.consultFlag===void 0),d=N(),x=L(),y=()=>{if(!s.value.illnessDesc)return m("请输入病情描述");if(s.value.illnessTime===void 0)return m("请选择症状持续时间");if(s.value.consultFlag===void 0)return m("请选择是否已经就诊");d.setIllness(s.value),x.push("/user/patient?isChange=1")};return R(()=>{d.consult.illnessDesc&&q({title:"温馨提示",message:"是否恢复您之前填写的病情信息呢？",closeOnPopstate:!1}).then(()=>{const{illnessDesc:e,illnessTime:o,consultFlag:t,pictures:c}=d.consult;s.value={illnessDesc:e,illnessTime:o,consultFlag:t,pictures:c},r.value=c||[]})}),(e,o)=>{const t=w,c=k,D=G,T=j,F=J;return f(),g("div",K,[n(t,{title:"图文问诊"}),l("div",Q,[X,l("div",Z,[$,ss,l("p",es,[n(c,{name:"consult-safe"}),os])])]),l("div",ls,[n(D,{type:"textarea",rows:"3",placeholder:"请详细描述您的病情，病情描述不能为空",modelValue:s.value.illnessDesc,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value.illnessDesc=a)},null,8,["modelValue"]),l("div",ts,[as,n(_,{options:h,modelValue:s.value.illnessTime,"onUpdate:modelValue":o[1]||(o[1]=a=>s.value.illnessTime=a)},null,8,["modelValue"])]),l("div",ns,[is,n(_,{options:V,modelValue:s.value.consultFlag,"onUpdate:modelValue":o[2]||(o[2]=a=>s.value.consultFlag=a)},null,8,["modelValue"])]),l("div",us,[n(T,{uploadIcon:"photo-o",uploadText:"上传图片",maxCount:"9",maxSize:5*1024*1024,afterRead:C,onDelete:b,modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=a=>r.value=a)},null,8,["modelValue"]),r.value.length?z("",!0):(f(),g("p",rs,"上传内容仅医生可见,最多9张图,最大5MB"))]),n(F,{onClick:y,class:E({disabled:H(I)}),type:"primary",block:"",round:""},{default:A(()=>[O("下一步")]),_:1},8,["class"])])])}}});const Us=Y(cs,[["__scopeId","data-v-7a2a2475"]]);export{Us as default};
